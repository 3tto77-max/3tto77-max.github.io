<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>PlayKing Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  padding:20px;
}
h2{color:#4ade80}
label{display:block;margin-top:15px}
input,select{
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:6px;
  border:none;
}
button{
  margin-top:15px;
  padding:12px;
  width:100%;
  border:none;
  border-radius:6px;
  font-size:16px;
  cursor:pointer;
}
#generate{background:#2563eb;color:#fff}
#copy{background:#16a34a;color:#fff}
#open{background:#7c3aed;color:#fff}
#result{
  margin-top:20px;
  background:#000;
  padding:10px;
  word-break:break-all;
  border-radius:6px;
  min-height:60px;
}
</style>
</head>

<body>

<h2>ğŸ¬ PlayKing â€“ Ù…ÙˆÙ„Ù‘Ø¯ Ø±ÙˆØ§Ø¨Ø·</h2>

<label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø« *</label>
<input id="url" placeholder="https://example.com/stream.m3u8">

<label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø«</label>
<input id="title" value="Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±">

<label>Ù…Ø¯Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚)</label>
<input id="minutes" type="number" value="5">

<label>Scheme (DRM)</label>
<select id="scheme">
  <option value="">Ø¨Ø¯ÙˆÙ†</option>
  <option value="clearkey">ClearKey</option>
  <option value="widevine">Widevine</option>
  <option value="playready">PlayReady</option>
</select>

<label>Key / License</label>
<input id="key">

<label>User-Agent</label>
<input id="useragent">

<label>Referer</label>
<input id="referer">

<label>Cookie</label>
<input id="cookie">

<label>Origin</label>
<input id="origin">

<button id="generate" onclick="generate()">âš¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
<button id="copy" onclick="copyLink()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
<button id="open" onclick="openLink()">ğŸš€ ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·</button>

<div id="result">Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§â€¦</div>

<script>
// =====================
// ğŸ” XOR + Base64
// =====================
function xorEncrypt(text, key) {
  let out = "";
  for (let i = 0; i < text.length; i++) {
    out += String.fromCharCode(
      text.charCodeAt(i) ^ key.charCodeAt(i % key.length)
    );
  }
  return btoa(out);
}

let finalLink = "";

function generate() {

  let url = document.getElementById("url").value.trim();
  if (!url) {
    alert("Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø«");
    return;
  }

  // Ø¥ØµÙ„Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø±Ø§Ø¨Ø·
  if (!url.startsWith("http://") && !url.startsWith("https://")) {
    url = "https://" + url;
  }

  const payload = {
    url: url,
    title: document.getElementById("title").value.trim(),
    scheme: document.getElementById("scheme").value,
    key: document.getElementById("key").value.trim(),
    useragent: document.getElementById("useragent").value.trim(),
    referer: document.getElementById("referer").value.trim(),
    cookie: document.getElementById("cookie").value.trim(),
    origin: document.getElementById("origin").value.trim(),
    exp: Date.now() + (parseInt(document.getElementById("minutes").value || 5) * 60000)
  };

  const SECRET_KEY = "3tto_key"; // Ù†ÙØ³ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
  const encrypted = xorEncrypt(JSON.stringify(payload), SECRET_KEY);

  finalLink =
    "https://3tto77-max.github.io/play/?data=" +
    encodeURIComponent(encrypted);

  document.getElementById("result").textContent = finalLink;
}

function copyLink() {
  if (!finalLink) {
    alert("ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£ÙˆÙ„Ø§Ù‹");
    return;
  }
  navigator.clipboard.writeText(finalLink);
  alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…");
}

function openLink() {
  if (!finalLink) {
    alert("ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£ÙˆÙ„Ø§Ù‹");
    return;
  }
  window.open(finalLink, "_blank");
}
</script>

</body>
</html>
