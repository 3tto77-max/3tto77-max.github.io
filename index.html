<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>PlayKing Links - ููููุฏ ุฑูุงุจุท ุงุญุชุฑุงูู</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- โ CSS ููุง ูู (ูู ุฃุบููุฑ ุดูุก) -->
  <!-- ููุณ CSS ุงููู ุฃุฑุณูุชู ุญุฑูููุง -->
</head>
<body>

<div class="container">
  <div class="header">
    <div class="logo">๐ฌ</div>
    <h1>PlayKing ููููุฏ ุงูุฑูุงุจุท</h1>
    <div class="subtitle">ุฃูุดุฆ ุฑูุงุจุท ุชุดุบูู ูุฎุตุตุฉ ููุชุทุจูู ุจุณูููุฉ</div>
  </div>

  <label class="required">ุฑุงุจุท ุงูุจุซ (URL)</label>
  <input id="url" placeholder="https://example.com/stream.mpd ุฃู https://example.com/master.m3u8">

  <div class="section">
    <div class="section-title">ูุนูููุงุช ุงูุจุซ</div>
    <label>ุนููุงู ุงูุจุซ</label>
    <input id="title" value="ุจุซ ูุจุงุดุฑ">

    <label>User-Agent</label>
    <input id="useragent">

    <label>Referer</label>
    <input id="referer">

    <label>Cookie</label>
    <input id="cookie">

    <label>Origin</label>
    <input id="origin">
  </div>

  <div class="section">
    <div class="section-title">ุฅุนุฏุงุฏุงุช ุงูุญูุงูุฉ (DRM)</div>
    <label>Scheme</label>
    <select id="scheme">
      <option value="">ุจุฏูู</option>
      <option value="clearkey" selected>ClearKey</option>
      <option value="widevine">Widevine</option>
      <option value="playready">PlayReady</option>
    </select>

    <label>Key / License</label>
    <input id="key">
  </div>

  <label>ูุฏุฉ ุงูุตูุงุญูุฉ (ุจุงูุฏูุงุฆู)</label>
  <input id="minutes" type="number" value="5">

  <div class="buttons">
    <button class="generate" onclick="generate()">โก ุชูููุฏ ุงูุฑุงุจุท</button>
    <button class="copy" onclick="copyLink()">๐ ูุณุฎ ุงูุฑุงุจุท</button>
    <button class="open" onclick="openApp()">๐ ูุชุญ ูู ุงูุชุทุจูู</button>
  </div>

  <div class="result-container">
    <div class="result-label">ุงูุฑุงุจุท ุงููุงุชุฌ</div>
    <div id="result" class="result">ุณูุธูุฑ ุงูุฑุงุจุท ููุง ุจุนุฏ ุงูุชูููุฏ...</div>
  </div>

  <div class="footer">
    ยฉ 2023 PlayKing | 3tto77-max.github.io
  </div>
</div>

<script>
/* ===============================
   ๐ XOR + Base64 Encryption
================================ */
function xorEncrypt(text, key) {
  let out = '';
  for (let i = 0; i < text.length; i++) {
    out += String.fromCharCode(
      text.charCodeAt(i) ^ key.charCodeAt(i % key.length)
    );
  }
  return btoa(out);
}

let generatedLink = "";

function generate() {

  let url = document.getElementById("url").value.trim();
  if (!url) {
    alert("โ ุฃุฏุฎู ุฑุงุจุท ุงูุจุซ");
    return;
  }

  if (!url.startsWith("http://") && !url.startsWith("https://")) {
    alert("โ ุงูุฑุงุจุท ูุฌุจ ุฃู ูุจุฏุฃ ุจู https:// ุฃู http://");
    return;
  }

  const payload = {
    url: url,
    title: document.getElementById("title").value.trim(),
    scheme: document.getElementById("scheme").value,
    key: document.getElementById("key").value.trim(),
    useragent: document.getElementById("useragent").value.trim(),
    referer: document.getElementById("referer").value.trim(),
    cookie: document.getElementById("cookie").value.trim(),
    origin: document.getElementById("origin").value.trim(),
    exp: Date.now() + (parseInt(document.getElementById("minutes").value || 5) * 60 * 1000)
  };

  const SECRET_KEY = "3tto_key"; // ๐ ููุณ ุงูููุชุงุญ ูู ุงูุชุทุจูู
  const encrypted = xorEncrypt(JSON.stringify(payload), SECRET_KEY);

  generatedLink =
    "https://3tto77-max.github.io/play/?data=" +
    encodeURIComponent(encrypted);

  document.getElementById("result").textContent = generatedLink;
}

function copyLink() {
  if (!generatedLink) {
    alert("โ ูููุฏ ุงูุฑุงุจุท ุฃููุงู");
    return;
  }
  navigator.clipboard.writeText(generatedLink);
  alert("โ ุชู ุงููุณุฎ");
}

function openApp() {
  if (!generatedLink) {
    alert("โ ูููุฏ ุงูุฑุงุจุท ุฃููุงู");
    return;
  }
  window.open(generatedLink, "_blank");
}
</script>

</body>
</html>
